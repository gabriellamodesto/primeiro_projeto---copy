@namespace
class SpriteKind:
    Coin = SpriteKind.create()
    Fantasma = SpriteKind.create()

def on_overlap_tile(sprite, location):
    global current_level
    current_level += 1
    startLevel()
scene.on_overlap_tile(SpriteKind.player,
    assets.tile("""
        myTile0
        """),
    on_overlap_tile)

def on_on_overlap(sprite2, otherSprite):
    info.change_score_by(1)
    sprites.destroy(otherSprite)
sprites.on_overlap(SpriteKind.player, SpriteKind.Coin, on_on_overlap)

def on_on_overlap2(sprite3, otherSprite2):
    global fantasma2
    sprites.destroy(otherSprite2)
    fantasma2 = sprites.create(img("""
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            . . . . . . . . . . . . . . . .
            """),
        SpriteKind.enemy)
    animation.run_image_animation(fantasma2,
        [img("""
                ........................
                ........................
                ........................
                ........................
                ..........fffff.........
                ........ff1111bff.......
                .......fb1111111bf......
                .......f111111111f......
                ......fd1111111ffff.....
                ......fd111dd1c111bf....
                ......fb11fcdf1b1bff....
                ......f11111bfbfbff.....
                ......f1b1bdfcffff......
                ......fbfbfcfcccf.......
                ......ffffffffff........
                .........ffffff.........
                .........ffffff.........
                .........fffffff..f.....
                ..........fffffffff.....
                ...........fffffff......
                ........................
                ........................
                ........................
                ........................
                """),
            img("""
                ........................
                ........................
                ........................
                ..........ffff..........
                ........ff1111ff........
                .......fb111111bf.......
                .......f1111111dbf......
                ......fd1111111ddf......
                ......fd111111dddf......
                ......fd111ddddddf......
                ......fd111ddddddf......
                ......fd1dddddddbf......
                ......fd1dfbddbbff......
                ......fbddfcdbbcf.......
                .....ffffccddbfff.......
                ....fcb1bbbfcffff.......
                ....f1b1dcffffffff......
                ....fdfdf..ffffffffff...
                .....f.f.....ffffff.....
                ........................
                ........................
                ........................
                ........................
                ........................
                """)],
        200,
        True)
    fantasma2.set_position(hero.x + 80, hero.y - 80)
    fantasma2.follow(hero)
sprites.on_overlap(SpriteKind.player, SpriteKind.Fantasma, on_on_overlap2)

def on_a_pressed():
    if hero.vy == 0:
        hero.vy = -150
controller.A.on_event(ControllerButtonEvent.PRESSED, on_a_pressed)

def on_overlap_tile2(sprite4, location2):
    game.game_over(False)
    game.set_game_over_effect(False, effects.melt)
scene.on_overlap_tile(SpriteKind.player,
    assets.tile("""
        myTile2
        """),
    on_overlap_tile2)

def startLevel():
    global coinn, Fantasma2
    if current_level == 0:
        tiles.set_current_tilemap(tilemap("""
            level2
            """))
    else:
        tiles.set_current_tilemap(tilemap("""
            level0
            """))
    tiles.place_on_random_tile(hero, assets.tile("""
        myTile5
        """))
    for value in tiles.get_tiles_by_type(assets.tile("""
        myTile5
        """)):
        tiles.set_tile_at(value, assets.tile("""
            transparency16
            """))
    hero.ay = 350
    scene.camera_follow_sprite(hero)
    info.set_life(5)
    for value2 in sprites.all_of_kind(SpriteKind.enemy):
        sprites.destroy(value2)
    for value3 in sprites.all_of_kind(SpriteKind.Coin):
        sprites.destroy(value3)
    for value4 in sprites.all_of_kind(SpriteKind.Fantasma):
        sprites.destroy(value4)
    for value5 in tiles.get_tiles_by_type(assets.tile("""
        myTile3
        """)):
        coinn = sprites.create(img("""
                . . . . . . . . . . . . . . . .
                . . . . . f f f f f f f . . . .
                . . . . f 5 5 5 5 5 5 5 f . . .
                . . . f 5 5 4 4 4 4 4 5 5 f . .
                . . f 5 5 5 5 5 5 5 5 5 5 5 f .
                . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                . . . f 5 5 4 4 4 5 5 5 5 f . .
                . . . . f 5 5 5 5 5 5 5 f . . .
                . . . . . f f f f f f f . . . .
                . . . . . . . . . . . . . . . .
                . . . . . . . . . . . . . . . .
                """),
            SpriteKind.Coin)
        animation.run_image_animation(coinn,
            [img("""
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . . . . . . . . .
                    . . . . . f f f f f f f . . . .
                    . . . . f 5 5 5 5 5 5 5 f . . .
                    . . . f 5 5 4 4 4 4 4 4 5 f . .
                    . . f 5 5 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . . f 5 4 4 4 4 4 5 5 5 f . .
                    . . . . f 5 5 5 5 5 5 5 f . . .
                    . . . . . f f f f f f f . . . .
                    . . . . . . . . . . . . . . . .
                    """),
                img("""
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . . . . . . . . .
                    . . . . . . f f f f f . . . . .
                    . . . . . f 5 5 5 5 5 f . . . .
                    . . . . f 5 5 4 4 4 4 5 f . . .
                    . . . f 5 5 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . . f 5 4 4 4 4 5 5 f . . .
                    . . . . . f 5 5 5 5 5 f . . . .
                    . . . . . . f f f f f . . . . .
                    . . . . . . . . . . . . . . . .
                    """),
                img("""
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . . . . . . . . .
                    . . . . . . . f f f . . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . f 5 5 4 4 5 f . . . .
                    . . . . f 5 5 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . . f 5 4 4 5 5 f . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . . f f f . . . . . .
                    . . . . . . . . . . . . . . . .
                    """),
                img("""
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . f f . . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . f 5 5 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . . f 5 4 5 f . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . . . f f . . . . . .
                    . . . . . . . . . . . . . . . .
                    """),
                img("""
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . . . . . . . . . .
                    """),
                img("""
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . . 5 . . . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . . . 5 . . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . . . . . . . . . .
                    """),
                img("""
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . . f . . . . . . .
                    . . . . . . . . . . . . . . . .
                    """),
                img("""
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . f f . . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . f 5 5 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . f 5 4 5 5 5 f . . . .
                    . . . . . . f 5 4 5 f . . . . .
                    . . . . . . . f 5 f . . . . . .
                    . . . . . . . . f f . . . . . .
                    . . . . . . . . . . . . . . . .
                    """),
                img("""
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . . . . . . . . .
                    . . . . . . . f f f . . . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . f 5 5 4 4 5 f . . . .
                    . . . . f 5 5 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . f 5 4 5 5 5 5 5 f . . .
                    . . . . . f 5 4 4 5 5 f . . . .
                    . . . . . . f 5 5 5 f . . . . .
                    . . . . . . . f f f . . . . . .
                    . . . . . . . . . . . . . . . .
                    """),
                img("""
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . . . . . . . . .
                    . . . . . . f f f f f . . . . .
                    . . . . . f 5 5 5 5 5 f . . . .
                    . . . . f 5 5 4 4 4 4 5 f . . .
                    . . . f 5 5 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . f 5 4 5 5 5 5 5 5 5 f . .
                    . . . . f 5 4 4 4 4 5 5 f . . .
                    . . . . . f 5 5 5 5 5 f . . . .
                    . . . . . . f f f f f . . . . .
                    . . . . . . . . . . . . . . . .
                    """),
                img("""
                    . . . . . . . . . . . . . . . .
                    . . . . . . . . . . . . . . . .
                    . . . . . f f f f f f f . . . .
                    . . . . f 5 5 5 5 5 5 5 f . . .
                    . . . f 5 5 4 4 4 4 4 4 5 f . .
                    . . f 5 5 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . f 5 4 5 5 5 5 5 5 5 5 5 f .
                    . . . f 5 4 4 4 4 4 5 5 5 f . .
                    . . . . f 5 5 5 5 5 5 5 f . . .
                    . . . . . f f f f f f f . . . .
                    . . . . . . . . . . . . . . . .
                    """)],
            100,
            True)
        tiles.place_on_tile(coinn, value5)
        tiles.set_tile_at(value5, assets.tile("""
            transparency16
            """))
    for value6 in tiles.get_tiles_by_type(assets.tile("""
        myTile4
        """)):
        Fantasma2 = sprites.create(img("""
                ........................
                ........................
                ........................
                ........................
                ..........ffff..........
                ........ff1111ff........
                .......fb111111bf.......
                .......f11111111f.......
                ......fd11111111df......
                ......fd11111111df......
                ......fddd1111dddf......
                ......fbdbfddfbdbf......
                ......fcdcf11fcdcf......
                .......fb111111ffff.....
                ......fffcdb1bc111cf....
                ....fc111cbfbf1b1b1f....
                ....f1b1b1ffffbfbfbf....
                ....fbfbfffffff.........
                .........fffff..........
                ..........fff...........
                ........................
                ........................
                ........................
                ........................
                """),
            SpriteKind.Fantasma)
        tiles.place_on_tile(Fantasma2, value6)
        tiles.set_tile_at(value6, assets.tile("""
            transparency16
            """))

def on_on_overlap3(sprite5, otherSprite3):
    sprites.destroy(otherSprite3)
    if hero.y < otherSprite3.y:
        info.change_score_by(3)
    else:
        info.change_life_by(-1)
sprites.on_overlap(SpriteKind.player, SpriteKind.enemy, on_on_overlap3)

Fantasma2: Sprite = None
coinn: Sprite = None
fantasma2: Sprite = None
hero: Sprite = None
current_level = 0
scene.set_background_image(img("""
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    ................................................................................................................................................................
    """))
current_level = 0
hero = sprites.create(img("""
        ....ffffff..............
        ..ffeeeef2f.............
        .ffeeeef222f............
        .feeeffeeeef............
        .ffffee2222ef...........
        .fe222ffffe2f...........
        fffffffeeefff...........
        ffe44ebf44eef...........
        fee4d41fddef............
        .feee4ddddf.............
        ..fdde444ef.............
        ..fdde22ccc.............
        ...eef22cdc.............
        ...f4444cddc............
        ....fffffcddc...........
        .....fff..cddc..........
        ...........cdc..........
        ............cc..........
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        """),
    SpriteKind.player)
controller.move_sprite(hero, 100, 0)
startLevel()

def on_on_update():
    hero.set_image(img("""
        . . . . . . . . . . . . . . . .
        . . . . . f f f f f f . . . . .
        . . . f f e e e e f 2 f . . . .
        . . f f e e e e f 2 2 2 f . . .
        . . f e e e f f e e e e f . . .
        . . f f f f e e 2 2 2 2 e f . .
        . . f e 2 2 2 f f f f e 2 f . .
        . f f f f f f f e e e f f f . .
        . f f e 4 4 e b f 4 4 e e f . .
        . f e e 4 d 4 1 f d d e f f . .
        . . f e e e 4 d d d d f d d f .
        . . . . f e e 4 e e e f b b f .
        . . . . f 2 2 2 4 d d e b b f .
        . . . f f 4 4 4 e d d e b f . .
        . . . f f f f f f e e f f . . .
        . . . . f f . . . f f f . . . .
        """))
    if hero.vy < 0:
        hero.set_image(img("""
            . . . . . . . . . . . . . . . .
            . . . . . . f f f f f f . . . .
            . . . . f f e e e e f 2 f . . .
            . . . f f e e e e f 2 2 2 f . .
            . . . f e e e f f e e e e f . .
            . . . f f f f e e 2 2 2 2 e f .
            . . . f e 2 2 2 f f f f e 2 f .
            . . f f f f f f f e e e f f f .
            . . f f e 4 4 e b f 4 4 e e f .
            . . f e e 4 d 4 1 f d d e f . .
            . . . f e e e 4 d d d d f . . .
            . . . . 4 d d e 4 4 4 e f . . .
            . . . . e d d e 2 2 2 2 f . . .
            . . . . f e e f 4 4 5 5 f f . .
            . . . . f f f f f f f f f f . .
            . . . . . f f . . . f f f . . .
            """))
    elif hero.vy > 0:
        hero.set_image(img("""
            . . . . . . . . . . . . . . . .
            . . . . . . f f f f f f . . . .
            . . . . f f e e e e f 2 f . . .
            . . . f f e e e e f 2 2 2 f . .
            . . . f e e e f f e e e e f . .
            . . . f f f f e e 2 2 2 2 e f .
            . . . f e 2 2 2 f f f f e 2 f .
            . . f f f f f f f e e e f f f .
            . . f f e 4 4 e b f 4 4 e e f .
            . . f e e 4 d 4 1 f d d e f . .
            . . . f e e e e e d d d f . . .
            . . . . . f 4 d d e 4 e f . . .
            . . . . . f e d d e 2 2 f . . .
            . . . . f f f e e f 5 5 f f . .
            . . . . f f f f f f f f f f . .
            . . . . . f f . . . f f f . . .
            """))
    else:
        pass
    if hero.vx < 0:
        hero.image.flip_x()
game.on_update(on_on_update)
